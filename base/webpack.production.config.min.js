var path=require("path");var glob=require("glob");var webpack=require("webpack");var HtmlwebpackPlugin=require("html-webpack-plugin");var CopyWebpackPlugin=require("copy-webpack-plugin");
var APP_PATH=path.resolve(process.cwd());var BUILD_PATH=path.resolve(APP_PATH,"src/build");function getEntry(){var a={};glob.sync(process.cwd()+"/dev/entry/*.js").forEach(function(b){console.log(b);
var c=b.match(/([^/]+?)\.js/)[1];a[c]="./dev/entry/"+c+".js";});return a;}function getHtmlPlugin(b){var a=[];glob.sync(process.cwd()+"/dev/*.html").forEach(function(c){var d=c.match(/([^/]+?)\.html/)[1];
a.push(new HtmlwebpackPlugin({filename:"../"+d+".html",template:c,inject:false}));});return a;}var metadata={host:"./build"};module.exports={entry:getEntry(),output:{path:BUILD_PATH,filename:"[name].js"},module:{loaders:[{test:/\.jsx?$/,loader:"babel",exclude:/node_modules/},{test:/\.vue$/,loader:"vue",exclude:/node_modules/},{test:/\.(css)$/,loader:"style-loader!css-loader"},{test:/\.scss$/,loaders:["style","css","sass"],},{test:/\.(png|jpg)$/,loader:"url?limit=40000"}]},resolve:{extensions:["",".js",".vue"],alias:{zepto:path.join(process.cwd(),"..","common/plugins/zepto.min.js"),swiper:path.join(process.cwd(),"..","common/plugins/swiper.min.js"),imgLazyLoad:path.join(process.cwd(),"..","common/plugins/imglazyload.js"),"art-template":path.join(process.cwd(),"..","common/plugins/art-template.js"),"common.scss":path.join(process.cwd(),"..","common/scss/common.scss"),}},vue:{loaders:{css:"style!css!autoprefixer!sass"}},plugins:[new webpack.optimize.CommonsChunkPlugin("common.js"),new webpack.DefinePlugin({metadata:JSON.stringify(metadata),PRODUCTION:JSON.stringify(true)}),new webpack.ProvidePlugin({}),new CopyWebpackPlugin([{from:"dev/htmlImg",to:"htmlImg"}]),].concat(getHtmlPlugin()),};
